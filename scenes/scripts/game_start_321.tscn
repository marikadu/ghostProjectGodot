[gd_scene load_steps=3 format=3 uid="uid://qu06wlu637ji"]

[ext_resource type="Theme" uid="uid://dti72e04ltog4" path="res://game.theme" id="1_nh8ac"]

[sub_resource type="GDScript" id="GDScript_84e7d"]
script/source = "extends Node
# to restart the same scene
# get_tree().reload_current_scene()

# slow down time
# Engine.time_scale = 0.5 (would be cool for lose screen)

@onready var label = $Label
@onready var game_start_timer: Timer = $GameStartTimer


var time_left


func _ready() -> void:
	label.visible = true
	pass
	#get_tree().paused = true
	#Events.possessed_escaped.connect(_on_possessed_escaped)
	
#	initializing npc before accessing it
	#call_deferred(\"_initialize_npc\")
	
	#tutorial_mode()
	

func time_until_game_start():
	time_left = game_start_timer.time_left
	var second = int(time_left) % 60
	#return [minute, second]
	return [second]
	

	#label.scale.x = move_toward(label.scale.x, 1, 3 * delta)
	#label.scale.y = move_toward(label.scale.y, 1, 3 * delta)


func _process(_delta: float) -> void:
	#label.text = \"%02d:%02d\" % time_left_until_win()
	label.text = \"%2d\" % time_until_game_start()
	
	if game_start_timer.wait_time < 1.0:
		#label.visible = false
		queue_free()
		pass
		#queue_free()
		#can_delete = true
		#self.queue_free()
	
	#if can_delete:
		#$\".\".queue_free()
		#queue_free()
	

	
#func tutorial_mode():
	#if Global.current_scene_name == \"level_1\":
		#print(\"setting cd timer to 30 seconds\")
		#cd_timer.set_wait_time(30.0)
	


func _on_game_start_timer_timeout() -> void:
	label.visible = false
	#queue_free()
	pass # Replace with function body.
"

[node name="GameStartTimer" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_84e7d")

[node name="Label" type="Label" parent="."]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -68.0
offset_top = 341.0
offset_right = 68.0
offset_bottom = 411.0
grow_horizontal = 2
size_flags_horizontal = 4
size_flags_vertical = 0
theme = ExtResource("1_nh8ac")
theme_override_font_sizes/font_size = 51
text = "0"
horizontal_alignment = 1

[node name="GameStartTimer" type="Timer" parent="."]
wait_time = 4.0
one_shot = true
autostart = true

[connection signal="timeout" from="GameStartTimer" to="." method="_on_game_start_timer_timeout"]
